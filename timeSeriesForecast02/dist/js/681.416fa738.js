"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[681],{14681:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{height:"900px",border:"1px solid #eee"}},[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[e("el-menu",{attrs:{"default-openeds":["1","3"]}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("作业1")]),e("el-menu-item-group",[e("el-menu-item",{attrs:{index:"1-2"}},[e("router-link",{attrs:{to:"/homework1daily"}},[t._v("容量预测模型")])],1)],1)],2),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-menu"}),t._v("作业2")]),e("el-menu-item-group",[e("el-menu-item",{attrs:{index:"2-1"}},[e("router-link",{attrs:{to:"/homework2hourly"}},[t._v("监控指标动态阈值告警")])],1)],1)],2)],1)],1),e("el-container",[e("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[e("span",[t._v("第三组作业")])]),e("el-main",[e("p",[t._v("容量预测告警模型")]),e("div",{staticClass:"block"},[e("el-select",{attrs:{placeholder:"请选择服务器"},model:{value:t.selectfwq,callback:function(e){t.selectfwq=e},expression:"selectfwq"}},t._l(t.hw1_options,(function(t){return e("el-option",{key:t.fwqID,attrs:{label:t.label,value:t.fwqID}})})),1),e("span",{staticClass:"demonstration"},[t._v("  ")]),e("el-date-picker",{attrs:{type:"daterange","value-fromat":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datefromto,callback:function(e){t.datefromto=e},expression:"datefromto"}}),e("span",{staticClass:"demonstration"},[t._v("  "),e("p",[t._v('"间隔几天预测/显示"')])]),e("el-input-number",{attrs:{min:1,max:30,label:"间隔几天预测/显示"},on:{change:t.handleChange},model:{value:t.input_period,callback:function(e){t.input_period=e},expression:"input_period"}})],1),e("div",{staticStyle:{width:"1400px",height:"700px"},attrs:{id:"main"}})])],1)],1)},o=[],s=(a(57658),a(44161)),n=a(8736);const i=(t,e)=>{switch(t){case 400:console.log("语义有误");break;case 401:console.log("服务器认证失败");break;case 403:console.log("服务器拒绝访问");break;case 404:console.log("地址错误");break;case 500:console.log("服务器遇到意外");break;case 502:console.log("服务器无响应");break;default:console.log(e);break}},l=s.Z.create({timeout:5e3});l.interceptors.request.use((t=>("post"===t.methods&&(t.data=n.stringify(t.data)),t)),(t=>Promise.reject(t))),l.interceptors.request.use((t=>Promise.resolve(t)),(t=>{const{response:e}=t;i(e.status,e.info)}));var d={data(){return{datefromto:"",hw1_options:[{fwqID:"1",label:"test-aiops-hbase-203"},{fwqID:"2",label:"test-bpfp-bs-engine2-ft"},{fwqID:"3",label:"test-rr_offline_qf_cluster"}],selectfwq:"1",input_period:"",start_timestamp:0,end_timstamp:0,list:[],datalist_used:[],datalist_predict:[]}},methods:{convertDateFormat(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();return r<10&&(r="0"+r),o<10&&(o="0"+o),a+"/"+r+"/"+o},drawChart(t,e){let a=this.$echarts.init(document.getElementById("main"));const r=[...t.map((t=>t.collect_time)),...e.map((t=>t.predict_time))],o=[...t.map((t=>t.used_value)),...e.map((t=>t.predict_value))],s=[],n=[];e.map((function(t){t.isAlarm&&(s.push(t.predict_time),n.push(t.predict_value))}));s[8],s[8];console.log(s),console.log(n);let i={xAxis:{data:r},yAxis:{type:"value"},series:[{data:o,itemStyle:{normal:{color:function(t){const e=i.xAxis.data[t.dataIndex],a=parseInt(Date.parse(e)),r=1680192e6;return a<r?"green":"red"}}},lineStyle:{color:"#775281"},type:"line",symbol:"rect",showAllSymbol:!0}],markPoint:{data:[{coord:[s[8],n[8]],symbol:"arrow",symbolSize:20,itemStyle:{color:"yellow"}}]}};a.setOption(i)}},mounted(){s.Z.get("http://127.0.0.1:8090/static",{params:{serverID:1,period:1,startDate:"2022/6/14",endDate:"2023/12/22"}}).then((t=>{console.log(t.data),this.datalist_used=Array.from(t.data.list_used),this.datalist_predict=Array.from(t.data.list_predict),console.log(this.datalist_predict.map((t=>t.isAlarm))),this.drawChart(this.datalist_used,this.datalist_predict)}))},updated(){this.datefromto[0]=this.datefromto[0].toString(),this.datefromto[1]=this.datefromto[1].toString(),s.Z.get("http://127.0.0.1:8090/static",{params:{serverID:this.selectfwq,period:this.input_period,startDate:this.convertDateFormat(this.datefromto[0]),endDate:this.convertDateFormat(this.datefromto[1])}}).then((t=>{this.datalist_used=Array.from(t.data.list_used),this.datalist_predict=Array.from(t.data.list_predict),console.log(this.datalist_predict.map((t=>t.isAlarm))),this.drawChart(this.datalist_used,this.datalist_predict)}))}},c=d,p=a(1001),u=(0,p.Z)(c,r,o,!1,null,null,null),m=u.exports},51538:function(t,e,a){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a(57658),t.exports=function(t,e,a,o){e=e||"&",a=a||"=";var s={};if("string"!==typeof t||0===t.length)return s;var n=/\+/g;t=t.split(e);var i=1e3;o&&"number"===typeof o.maxKeys&&(i=o.maxKeys);var l=t.length;i>0&&l>i&&(l=i);for(var d=0;d<l;++d){var c,p,u,m,f=t[d].replace(n,"%20"),h=f.indexOf(a);h>=0?(c=f.substr(0,h),p=f.substr(h+1)):(c=f,p=""),u=decodeURIComponent(c),m=decodeURIComponent(p),r(s,u)?Array.isArray(s[u])?s[u].push(m):s[u]=[s[u],m]:s[u]=m}return s}},98292:function(t){var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,a,r,o){return a=a||"&",r=r||"=",null===t&&(t=void 0),"object"===typeof t?Object.keys(t).map((function(o){var s=encodeURIComponent(e(o))+r;return Array.isArray(t[o])?t[o].map((function(t){return s+encodeURIComponent(e(t))})).join(a):s+encodeURIComponent(e(t[o]))})).filter(Boolean).join(a):o?encodeURIComponent(e(o))+r+encodeURIComponent(e(t)):""}},8736:function(t,e,a){e.decode=e.parse=a(51538),e.encode=e.stringify=a(98292)}}]);
//# sourceMappingURL=681.416fa738.js.map
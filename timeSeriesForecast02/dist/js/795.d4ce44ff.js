"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[795],{9795:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("el-container",{staticStyle:{height:"800px",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1","3"]}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),e._v("作业1")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"1-2"}},[t("router-link",{attrs:{to:"/homework1daily"}},[e._v("容量预测模型")])],1)],1)],2),t("el-submenu",{attrs:{index:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),e._v("作业2")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"2-1"}},[t("router-link",{attrs:{to:"/homework2hourly"}},[e._v("监控指标动态阈值告警")])],1)],1)],2)],1)],1),t("el-container",[t("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[t("span",[e._v("第三组作业")])]),t("el-main",[t("div",{staticClass:"main"},[t("p",[e._v("监控指标动态阈值告警模型(每次都需刷新页面再选择服务器和日期时间)")]),t("el-select",{attrs:{placeholder:"请选择服务器"},model:{value:e.selectServer,callback:function(t){e.selectServer=t},expression:"selectServer"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("span",{staticClass:"demonstration"},[e._v("  ")]),t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timefromto,callback:function(t){e.timefromto=t},expression:"timefromto"}})],1),t("div",{staticStyle:{width:"1400px",height:"700px"},attrs:{id:"main"}})])],1)],1)},i=[],r=(a(57658),a(44161)),s={data(){return{options:[{value:"1",label:"服务器1"},{value:"2",label:"服务器2"},{value:"3",label:"服务器3"},{value:"4",label:"服务器4"},{value:"5",label:"服务器5"},{value:"6",label:"服务器6"},{value:"7",label:"服务器7"},{value:"8",label:"服务器8"},{value:"9",label:"服务器9"},{value:"10",label:"服务器10"},{value:"11",label:"服务器11"},{value:"12",label:"服务器12"},{value:"13",label:"服务器13"},{value:"14",label:"服务器14"},{value:"15",label:"服务器15"}],selectServer:"1",timefromto:"",input_period:"",datalist_used:[],datalist_predict:[]}},methods:{convertDateFormat(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth(),i=t.getDate(),r=t.getHours(),s=t.getMinutes();return l+=1,l<10&&(l="0"+l),i<10&&(i="0"+i),a+"/"+l+"/"+i+" "+r+":"+s},drawChart(e,t,a){let l=this.$echarts.init(document.getElementById("main"));const i=t.map((e=>e.predict_time)),r=t.map((e=>e.predict_value)),s=t.map((e=>e.max_value)),o=t.map((e=>e.min_value)),n=e.map((e=>e.collect_time)),d=e.map((e=>e.used_value)),m=e.map((e=>e.isAlarm));let u={},c=[],p=[],v={tooltip:{trigger:"none"},legend:{data:["predict_value","predict_max","predict_min","used_value","alarm_value"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:[{type:"category",data:i},{type:"category",data:n}],yAxis:{type:"value"},series:[{name:"predict_value",type:"line",data:r},{name:"predict_max",type:"line",data:s},{name:"predict_min",type:"line",data:o},u={name:"used_value",type:"line",data:c,xAxisIndex:1,yAxisIndex:0},{name:"alarm_value",type:"scatter",data:p,symbol:"diamond",symbolSize:10}]};l.setOption(v);let h=0;function _(){0<=h<=a&&(console.log(h),c.push(d[h]),console.log(d[h]),h+=1)}function g(){m[h-1]||p.push([n[h-1],d[h-1]])}setInterval((function(){_(),g(),l.setOption(v)}),300)}},mounted(){r.Z.get("http://127.0.0.1:8090/dynamic",{params:{serverID:1,startDate:"2023/4/18 14:00",endDate:"2023/4/18 15:40"}}).then((e=>{console.log(e.data),this.datalist_used=Array.from(e.data.list_used),this.datalist_predict=Array.from(e.data.list_predict)}))},updated(){this.timefromto[0]=this.timefromto[0].toString(),this.timefromto[1]=this.timefromto[1].toString(),r.Z.get("http://127.0.0.1:8090/dynamic",{params:{serverID:this.selectServer,startDate:this.convertDateFormat(this.timefromto[0]),endDate:this.convertDateFormat(this.timefromto[1])}}).then((e=>{console.log("aaa"),console.log(e.data),this.datalist_used=Array.from(e.data.list_used),this.datalist_predict=Array.from(e.data.list_predict),this.drawChart(this.datalist_used,this.datalist_predict,e.data.list_used.length)}))}},o=s,n=a(1001),d=(0,n.Z)(o,l,i,!1,null,null,null),m=d.exports}}]);
//# sourceMappingURL=795.d4ce44ff.js.map